language: python
cache:
  directories:
  - "$HOME/google-cloud-sdk/"
python:
- '2.7'
script:
- echo "skip pytest";
before_install:
- echo "no install dependencies";
after_script:
- echo "$TRAVIS_BRANCH";
- echo "$TRAVIS_EVENT_TYPE"; 
- if [ "master" == "$TRAVIS_BRANCH" ];then
    echo "correct branch";
  fi
- if [ "$TRAVIS_EVENT_TYPE" == "push" ];then
    echo "correct travis event";
  fi
- if [ "master" == "$TRAVIS_BRANCH" ] && [ "$TRAVIS_EVENT_TYPE" == "push" ]; then
    echo "Deploying to GCS";
  else
    echo "$TRAVIS_BRANCH";
    echo "$TRAVIS_EVENT_TYPE"; 
    echo "No GCS deployment because build was not triggered by push to master";
  fi 
deploy:
  provider: script
  script: chmod +x ./deploy.sh && ./deploy.sh 
  on:
    branch: master